{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = function (a0, a1) {\n  return {\n    \"is-invalid\": a0,\n    \"is-valid\": a1\n  };\n};\nconst _c1 = function (a0, a1) {\n  return {\n    \"btn-secondary\": a0,\n    \"btn-primary\": a1\n  };\n};\nexport class LoginComponent {\n  switchToRegistrati() {\n    this.mostraRegistrati.emit();\n  }\n  ngOnInit() {\n    fetch(\"http://localhost:1337/persData\").then(response => response.json()).then(json => {\n      this.pers = json;\n      console.log(this.pers);\n    }).catch(err => console.log(\"request failed: \", err));\n  }\n  constructor(formBuilder) {\n    this.formBuilder = formBuilder;\n    this.accessoRiuscito = new EventEmitter();\n    this.mostraRegistrati = new EventEmitter();\n    this.url = \"http://localhost:1337/prendi\";\n    this.pers = [];\n    this.mail = \"\";\n    this.reactiveForm = this.formBuilder.group({\n      password: ['', [Validators.required, Validators.minLength(2), Validators.maxLength(20)]],\n      mail: ['', [Validators.pattern('[a-z0-9._%+-]+@[a-z0-9-.]+\\\\.[a-z]{2,}$'), Validators.required]]\n    });\n  }\n  sendData() {\n    console.log(this.reactiveForm.value);\n  }\n  accedi() {\n    const formValue = this.reactiveForm.value;\n    const utenteAutenticato = this.pers.find(user => user.mail === formValue.mail && user.password === formValue.password);\n    if (utenteAutenticato) {\n      // L'utente è autenticato, puoi gestire l'accesso qui\n      console.log('Accesso consentito');\n    } else {\n      // L'utente non è autenticato, puoi gestire il caso qui\n      console.log('Credenziali non valide');\n    }\n    if (utenteAutenticato) {\n      this.accessoRiuscito.emit();\n    }\n  }\n  static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"login\"]],\n    outputs: {\n      accessoRiuscito: \"accessoRiuscito\",\n      mostraRegistrati: \"mostraRegistrati\"\n    },\n    decls: 20,\n    vars: 10,\n    consts: [[1, \"princ\"], [\"novalidate\", \"\", 3, \"formGroup\", \"ngSubmit\"], [2, \"width\", \"300px\", \"height\", \"400px\", \"border\", \"1px solid black\", \"display\", \"flex\", \"flex-direction\", \"column\", \"align-items\", \"center\", \"justify-content\", \"center\", \"border-radius\", \"30px\"], [2, \"text-align\", \"center\"], [\"for\", \"mail\"], [\"type\", \"email\", \"id\", \"mail\", \"name\", \"mail\", \"placeholder\", \"Inserisci l'indirizzo mail\", \"formControlName\", \"mail\", 1, \"form-control\", 2, \"width\", \"200px\", 3, \"ngClass\"], [1, \"form-row\"], [\"for\", \"password\"], [\"type\", \"Password\", \"id\", \"password\", \"name\", \"password\", \"placeholder\", \"Inserisci la password\", \"formControlName\", \"password\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"mt-3\", \"mb-3\", 2, \"width\", \"240px\", \"border-radius\", \"20px\", 3, \"ngClass\", \"disabled\", \"click\"], [1, \"btn\", \"btn-primary\", 3, \"click\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_1_listener() {\n          return ctx.sendData();\n        });\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"h2\", 3);\n        i0.ɵɵtext(4, \"LOGIN\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\")(6, \"label\", 4);\n        i0.ɵɵtext(7, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"input\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"br\");\n        i0.ɵɵelementStart(10, \"div\", 6)(11, \"div\")(12, \"label\", 7);\n        i0.ɵɵtext(13, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"input\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(15, \"br\");\n        i0.ɵɵelementStart(16, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_16_listener() {\n          return ctx.accedi();\n        });\n        i0.ɵɵtext(17, \"LOGIN\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_18_listener() {\n          return ctx.switchToRegistrati();\n        });\n        i0.ɵɵtext(19, \"fvfnivf\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.reactiveForm);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(4, _c0, ctx.reactiveForm.controls[\"mail\"].invalid && ctx.reactiveForm.controls[\"mail\"].dirty, ctx.reactiveForm.controls[\"mail\"].valid && ctx.reactiveForm.controls[\"mail\"].dirty));\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(7, _c1, ctx.reactiveForm.invalid, ctx.reactiveForm.valid))(\"disabled\", ctx.reactiveForm.invalid);\n      }\n    },\n    dependencies: [i2.NgClass, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n    styles: [\".princ[_ngcontent-%COMP%]{\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  padding-top: 25vh;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLGlCQUFpQjtBQUNuQiIsInNvdXJjZXNDb250ZW50IjpbIi5wcmluY3tcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgcGFkZGluZy10b3A6IDI1dmg7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["EventEmitter","Validators","LoginComponent","switchToRegistrati","mostraRegistrati","emit","ngOnInit","fetch","then","response","json","pers","console","log","catch","err","constructor","formBuilder","accessoRiuscito","url","mail","reactiveForm","group","password","required","minLength","maxLength","pattern","sendData","value","accedi","formValue","utenteAutenticato","find","user","_","i0","ɵɵdirectiveInject","i1","FormBuilder","_2","selectors","outputs","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","LoginComponent_Template_form_ngSubmit_1_listener","ɵɵtext","ɵɵelementEnd","ɵɵelement","LoginComponent_Template_button_click_16_listener","LoginComponent_Template_button_click_18_listener","ɵɵadvance","ɵɵproperty","ɵɵpureFunction2","_c0","controls","invalid","dirty","valid","_c1"],"sources":["C:\\Users\\Leke\\OneDrive\\Desktop\\ANGULAR\\ESAUTO\\EsAuto\\src\\app\\login\\login.component.ts","C:\\Users\\Leke\\OneDrive\\Desktop\\ANGULAR\\ESAUTO\\EsAuto\\src\\app\\login\\login.component.html"],"sourcesContent":["import {Component, EventEmitter, OnInit, Output} from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n  @Output() accessoRiuscito = new EventEmitter<void>();\r\n  @Output() mostraRegistrati = new EventEmitter<void>();\r\n\r\n  switchToRegistrati(): void {\r\n    this.mostraRegistrati.emit();\r\n  }\r\n\r\n  private url = \"http://localhost:1337/prendi\";\r\n\r\n  data: any;\r\n  pers: { codiceFiscale: string, mail: string, password: string, confermaPassword: string, cognome: string, nome: string, indirizzo: string }[] = [];\r\n\r\n  ngOnInit() {\r\n  fetch(\"http://localhost:1337/persData\")\r\n        .then(response => response.json())\r\n        .then(json => {\r\n          this.pers = json;\r\n          console.log(this.pers)\r\n        })\r\n        .catch(err => console.log(\"request failed: \", err))\r\n  }\r\n\r\n  reactiveForm: FormGroup;\r\n  mail: string = \"\";\r\n\r\n  constructor(private formBuilder: FormBuilder) {\r\n    this.reactiveForm = this.formBuilder.group({\r\n      password: [\r\n        '',\r\n        [\r\n          Validators.required,\r\n          Validators.minLength(2),\r\n          Validators.maxLength(20)\r\n        ]\r\n      ],\r\n      mail: [\r\n        '',\r\n        [\r\n          Validators.pattern('[a-z0-9._%+-]+@[a-z0-9-.]+\\\\.[a-z]{2,}$'),\r\n\r\n          Validators.required\r\n        ]\r\n      ]\r\n    });\r\n  }\r\n\r\n\r\n\r\n  sendData() {\r\n    console.log(this.reactiveForm.value)\r\n  }\r\n\r\n  accedi() {\r\n    const formValue = this.reactiveForm.value;\r\n    const utenteAutenticato = this.pers.find(user =>\r\n        user.mail === formValue.mail && user.password === formValue.password\r\n    );\r\n\r\n    if (utenteAutenticato) {\r\n      // L'utente è autenticato, puoi gestire l'accesso qui\r\n      console.log('Accesso consentito');\r\n    } else {\r\n      // L'utente non è autenticato, puoi gestire il caso qui\r\n      console.log('Credenziali non valide');\r\n    }\r\n\r\n    if (utenteAutenticato) {\r\n      this.accessoRiuscito.emit();\r\n    }\r\n\r\n  }\r\n}\r\n\r\n\r\n/*\r\n\r\n private url=\"http://localhost:1337/prendi\";\r\n\r\n  data:any;\r\n\r\n  ngOnInit() {\r\n    fetch(this.url)\r\n      .then(response=> response.json())\r\n      .then(json=> {\r\n        this.data = json;\r\n        console.log(this.data)\r\n      })\r\n      .catch(err => console.log(\"request failed: \" , err))\r\n  }\r\n */\r\n","<div class=\"princ\">\r\n\r\n  <form novalidate [formGroup]=\"reactiveForm\" (ngSubmit)=\"sendData()\">\r\n    <div style=\"width: 300px; height: 400px; border: 1px solid black; display: flex; flex-direction: column; align-items: center; justify-content: center;border-radius: 30px\">\r\n    <h2 style=\"text-align: center\">LOGIN</h2>\r\n    <!--Mail-->\r\n    <div>\r\n      <label for=\"mail\">Email</label>\r\n      <input style=\"width: 200px\" type=\"email\"\r\n             class=\"form-control\"\r\n             id=\"mail\"\r\n             name=\"mail\"\r\n             placeholder=\"Inserisci l'indirizzo mail\"\r\n             formControlName=\"mail\"\r\n             [ngClass]=\"{\r\n                'is-invalid':reactiveForm.controls['mail'].invalid &&\r\n                             reactiveForm.controls['mail'].dirty,\r\n                'is-valid': reactiveForm.controls['mail'].valid &&\r\n                            reactiveForm.controls['mail'].dirty\r\n             }\">\r\n    </div>\r\n      <br>\r\n    <div class=\"form-row\">\r\n      <!--Name-->\r\n      <div>\r\n        <label for=\"password\">Password</label>\r\n        <input type=\"Password\"\r\n               class=\"form-control\"\r\n               id=\"password\"\r\n               name=\"password\"\r\n               placeholder=\"Inserisci la password\"\r\n               formControlName=\"password\"\r\n        >\r\n      </div>\r\n    </div>\r\n      <br>\r\n\r\n    <button style=\"width: 240px; border-radius: 20px;\" type=\"submit\" class=\"btn btn-primary  mt-3 mb-3\" [ngClass]=\"{'btn-secondary': reactiveForm.invalid,'btn-primary':reactiveForm.valid}\" [disabled]=\"reactiveForm.invalid\" (click)=\"accedi()\">LOGIN</button>\r\n\r\n<button class=\"btn btn-primary\" (click)=\"switchToRegistrati()\">fvfnivf</button>\r\n</div>\r\n  </form>\r\n</div>\r\n\r\n\r\n"],"mappings":"AAAA,SAAmBA,YAAY,QAAuB,eAAe;AACrE,SAAiCC,UAAU,QAAQ,gBAAgB;;;;;;;;;;;;;;;;AAOnE,OAAM,MAAOC,cAAc;EAIzBC,kBAAkBA,CAAA;IAChB,IAAI,CAACC,gBAAgB,CAACC,IAAI,EAAE;EAC9B;EAOAC,QAAQA,CAAA;IACRC,KAAK,CAAC,gCAAgC,CAAC,CAChCC,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,EAAE,CAAC,CACjCF,IAAI,CAACE,IAAI,IAAG;MACX,IAAI,CAACC,IAAI,GAAGD,IAAI;MAChBE,OAAO,CAACC,GAAG,CAAC,IAAI,CAACF,IAAI,CAAC;IACxB,CAAC,CAAC,CACDG,KAAK,CAACC,GAAG,IAAIH,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEE,GAAG,CAAC,CAAC;EACzD;EAKAC,YAAoBC,WAAwB;IAAxB,KAAAA,WAAW,GAAXA,WAAW;IAzBrB,KAAAC,eAAe,GAAG,IAAIlB,YAAY,EAAQ;IAC1C,KAAAI,gBAAgB,GAAG,IAAIJ,YAAY,EAAQ;IAM7C,KAAAmB,GAAG,GAAG,8BAA8B;IAG5C,KAAAR,IAAI,GAA4I,EAAE;IAalJ,KAAAS,IAAI,GAAW,EAAE;IAGf,IAAI,CAACC,YAAY,GAAG,IAAI,CAACJ,WAAW,CAACK,KAAK,CAAC;MACzCC,QAAQ,EAAE,CACR,EAAE,EACF,CACEtB,UAAU,CAACuB,QAAQ,EACnBvB,UAAU,CAACwB,SAAS,CAAC,CAAC,CAAC,EACvBxB,UAAU,CAACyB,SAAS,CAAC,EAAE,CAAC,CACzB,CACF;MACDN,IAAI,EAAE,CACJ,EAAE,EACF,CACEnB,UAAU,CAAC0B,OAAO,CAAC,yCAAyC,CAAC,EAE7D1B,UAAU,CAACuB,QAAQ,CACpB;KAEJ,CAAC;EACJ;EAIAI,QAAQA,CAAA;IACNhB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACQ,YAAY,CAACQ,KAAK,CAAC;EACtC;EAEAC,MAAMA,CAAA;IACJ,MAAMC,SAAS,GAAG,IAAI,CAACV,YAAY,CAACQ,KAAK;IACzC,MAAMG,iBAAiB,GAAG,IAAI,CAACrB,IAAI,CAACsB,IAAI,CAACC,IAAI,IACzCA,IAAI,CAACd,IAAI,KAAKW,SAAS,CAACX,IAAI,IAAIc,IAAI,CAACX,QAAQ,KAAKQ,SAAS,CAACR,QAAQ,CACvE;IAED,IAAIS,iBAAiB,EAAE;MACrB;MACApB,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;KAClC,MAAM;MACL;MACAD,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;;IAGvC,IAAImB,iBAAiB,EAAE;MACrB,IAAI,CAACd,eAAe,CAACb,IAAI,EAAE;;EAG/B;EAAC,QAAA8B,CAAA,G;qBAvEUjC,cAAc,EAAAkC,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,WAAA;EAAA;EAAA,QAAAC,EAAA,G;UAAdtC,cAAc;IAAAuC,SAAA;IAAAC,OAAA;MAAAxB,eAAA;MAAAd,gBAAA;IAAA;IAAAuC,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,wBAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCR3BZ,EAAA,CAAAc,cAAA,aAAmB;QAE2Bd,EAAA,CAAAe,UAAA,sBAAAC,iDAAA;UAAA,OAAYH,GAAA,CAAArB,QAAA,EAAU;QAAA,EAAC;QACjEQ,EAAA,CAAAc,cAAA,aAA2K;QAC5Id,EAAA,CAAAiB,MAAA,YAAK;QAAAjB,EAAA,CAAAkB,YAAA,EAAK;QAEzClB,EAAA,CAAAc,cAAA,UAAK;QACed,EAAA,CAAAiB,MAAA,YAAK;QAAAjB,EAAA,CAAAkB,YAAA,EAAQ;QAC/BlB,EAAA,CAAAmB,SAAA,eAWU;QACZnB,EAAA,CAAAkB,YAAA,EAAM;QACJlB,EAAA,CAAAmB,SAAA,SAAI;QACNnB,EAAA,CAAAc,cAAA,cAAsB;QAGId,EAAA,CAAAiB,MAAA,gBAAQ;QAAAjB,EAAA,CAAAkB,YAAA,EAAQ;QACtClB,EAAA,CAAAmB,SAAA,gBAMC;QACHnB,EAAA,CAAAkB,YAAA,EAAM;QAENlB,EAAA,CAAAmB,SAAA,UAAI;QAENnB,EAAA,CAAAc,cAAA,iBAA8O;QAAnBd,EAAA,CAAAe,UAAA,mBAAAK,iDAAA;UAAA,OAASP,GAAA,CAAAnB,MAAA,EAAQ;QAAA,EAAC;QAACM,EAAA,CAAAiB,MAAA,aAAK;QAAAjB,EAAA,CAAAkB,YAAA,EAAS;QAEhQlB,EAAA,CAAAc,cAAA,kBAA+D;QAA/Bd,EAAA,CAAAe,UAAA,mBAAAM,iDAAA;UAAA,OAASR,GAAA,CAAA9C,kBAAA,EAAoB;QAAA,EAAC;QAACiC,EAAA,CAAAiB,MAAA,eAAO;QAAAjB,EAAA,CAAAkB,YAAA,EAAS;;;QArC5DlB,EAAA,CAAAsB,SAAA,GAA0B;QAA1BtB,EAAA,CAAAuB,UAAA,cAAAV,GAAA,CAAA5B,YAAA,CAA0B;QAYhCe,EAAA,CAAAsB,SAAA,GAKE;QALFtB,EAAA,CAAAuB,UAAA,YAAAvB,EAAA,CAAAwB,eAAA,IAAAC,GAAA,EAAAZ,GAAA,CAAA5B,YAAA,CAAAyC,QAAA,SAAAC,OAAA,IAAAd,GAAA,CAAA5B,YAAA,CAAAyC,QAAA,SAAAE,KAAA,EAAAf,GAAA,CAAA5B,YAAA,CAAAyC,QAAA,SAAAG,KAAA,IAAAhB,GAAA,CAAA5B,YAAA,CAAAyC,QAAA,SAAAE,KAAA,EAKE;QAkByF5B,EAAA,CAAAsB,SAAA,GAAoF;QAApFtB,EAAA,CAAAuB,UAAA,YAAAvB,EAAA,CAAAwB,eAAA,IAAAM,GAAA,EAAAjB,GAAA,CAAA5B,YAAA,CAAA0C,OAAA,EAAAd,GAAA,CAAA5B,YAAA,CAAA4C,KAAA,EAAoF,aAAAhB,GAAA,CAAA5B,YAAA,CAAA0C,OAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}